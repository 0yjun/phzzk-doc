## 1. 시청자가 방송에 입장한다
- **(Web 서버 → WAS 서버)**:
  - 시청자가 웹 페이지에서 방송을 클릭하여 입장 요청을 보냄.
  - WAS 서버가 방송 메타데이터를 확인하고, 해당 방송에 대한 정보를 사용자에게 전달.

## 2. 이전 채팅 데이터 조회
- **(WAS 서버 → 채팅 서비스)**:
  - WAS 서버가 채팅 서비스에 이전 채팅 데이터 조회 요청.
  
### 2.1. 채팅 수가 N개 이상인 경우
- **(채팅 서비스 → 서치 서비스)**:
  - 채팅 서비스가 서치 서비스에 최신 N개의 채팅 데이터 조회 요청.
- **(서치 서비스 → 채팅 서비스)**:
  - 서치 서비스가 최신 N개의 채팅 데이터를 반환.
- **(채팅 서비스 → WAS 서버)**:
  - 채팅 서비스가 최신 채팅 데이터를 WAS 서버로 전달.
- **(WAS 서버 → Web 서버)**:
  - WAS 서버가 채팅 데이터를 웹 서버로 전달.
- **(Web 서버)**:
  - 웹 서버가 사용자 인터페이스(UI)에 최신 채팅을 표시.

### 2.2. 채팅 수가 N개 미만인 경우
- **(채팅 서비스 → 데이터베이스)**:
  - 채팅 서비스가 데이터베이스에서 최신 채팅 데이터를 조회 요청.
- **(데이터베이스 → 채팅 서비스)**:
  - 데이터베이스가 최신 N개의 채팅 데이터를 반환.
- **(채팅 서비스 → WAS 서버)**:
  - 채팅 서비스가 최신 채팅 데이터를 WAS 서버로 전달.
- **(WAS 서버 → Web 서버)**:
  - WAS 서버가 채팅 데이터를 웹 서버로 전달.
- **(Web 서버)**:
  - 웹 서버가 사용자 인터페이스(UI)에 최신 채팅을 표시.

## 3. 웹소켓 연결 설정
- **(Web 서버 → 사용자)**:
  - 웹 서버가 웹소켓을 통해 실시간 채팅 기능을 위한 연결을 설정.

## 4. 시청자가 채팅을 입력한다
- **(Web 서버 → 사용자)**:
  - 시청자는 입력 필드에 채팅 내용을 입력하고 "전송" 버튼 클릭.
- **(Web 서버 → 채팅 서비스)**:
  - 웹 서버가 시청자의 채팅 메시지를 채팅 서비스로 전송.

## 5. 채팅 서비스가 채팅 메시지를 처리한다
- **(채팅 서비스)**:
  - 채팅 서비스가 채팅 메시지를 수신
- **(채팅 서비스 → 서치 서비스)**:
  - 채팅 메시지를 서치 서비스에 추가.

## 6. 웹소켓을 통해 실시간으로 채팅 메시지 전송
- **(채팅 서비스 → 웹소켓)**:
  - 채팅 서비스가 새로운 채팅 메시지를 웹소켓을 통해 모든 연결된 클라이언트(시청자)에게 전송.
- **(Web 서버)**:
  - 각 웹 서버가 수신한 채팅 메시지를 해당 클라이언트의 채팅 인터페이스에 추가.

## 7. 시청자는 채팅 메시지를 실시간으로 확인한다
- **(Web 서버)**:
  - 웹 서버가 채팅 인터페이스에 새로운 메시지를 추가하여 사용자에게 실시간으로 업데이트.
